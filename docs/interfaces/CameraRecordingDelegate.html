<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>CameraRecordingDelegate | hap-nodejs</title><meta name="description" content="Documentation for hap-nodejs"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script async src="../assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base=".."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">hap-nodejs</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><ul class="tsd-breadcrumb"><li><a href="../modules.html">hap-nodejs</a></li><li><a href="CameraRecordingDelegate.html">CameraRecordingDelegate</a></li></ul><h1>Interface CameraRecordingDelegate</h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><section class="tsd-panel tsd-comment"><div class="tsd-comment tsd-typography"><div class="lead">
<p>A <code>CameraRecordingDelegate</code> is responsible for handling recordings of a HomeKit Secure Video camera.</p>
</div><div><p>It is responsible for maintaining the prebuffer (see {@see CameraRecordingOptions.prebufferLength},
once recording was activated (see {@see updateRecordingActive}).</p>
<p>Before recording is considered enabled two things must happen:</p>
<ul>
<li>Recording must be enabled by the user. Signaled through <a href="CameraRecordingDelegate.html#updateRecordingActive">updateRecordingActive</a>.</li>
<li>Recording configurations must be selected by a HomeKit controller through <a href="CameraRecordingDelegate.html#updateRecordingConfiguration">updateRecordingConfiguration</a>.</li>
</ul>
<p>A typical recording event scenario happens as follows:</p>
<ul>
<li>The camera is in idle mode, maintaining the prebuffer (the duration of the prebuffer depends on the selected <a href="CameraRecordingConfiguration.html">CameraRecordingConfiguration</a>).</li>
<li>A recording event is triggered (e.g. motion or doorbell button press) and the camera signals it through
the respective characteristics (e.g. <a href="../classes/Characteristic.html#MotionDetected">Characteristic.MotionDetected</a> or <a href="../classes/Characteristic.html#ProgrammableSwitchEvent">Characteristic.ProgrammableSwitchEvent</a>).
Further, the camera saves the content of the prebuffer and starts recording the video.
The camera should continue to store the recording until it runs out of space.
In any case the camera should preserve recordings which are nearest to the triggered event.
A stored recording might be completely deleted if a stream request wasn&#39;t initiated for eight seconds.</li>
<li>A HomeKit Controller will open a new recording session to download the next recording.
This results in a call to <a href="CameraRecordingDelegate.html#handleRecordingStreamRequest">handleRecordingStreamRequest</a>.</li>
<li>Once the recording event is finished the camera will reset the state accordingly
(e.g. in the <a href="../classes/Service.html#MotionSensor">Service.MotionSensor</a> or <a href="../classes/Service.html#Doorbell">Service.Doorbell</a> service).
It will continue to send the remaining fragments of the currently ongoing recording stream request.</li>
<li>The camera will either reach the end of the recording (and signal this via <a href="RecordingPacket.html#isLast">RecordingPacket.isLast</a>. Also see <a href="CameraRecordingDelegate.html#acknowledgeStream">acknowledgeStream</a>)
or it will continue to stream til the HomeKit Controller closes
the stream <a href="CameraRecordingDelegate.html#closeRecordingStream">with reason {@link HDSProtocolSpecificErrorReason.NORMAL</a>}.</li>
<li>The camera goes back into idle mode.</li>
</ul>
</div></div></section><section class="tsd-panel tsd-hierarchy"><h3>Hierarchy</h3><ul class="tsd-hierarchy"><li><span class="target">CameraRecordingDelegate</span></li></ul></section><section class="tsd-panel-group tsd-index-group"><h2>Index</h2><section class="tsd-panel tsd-index-panel"><div class="tsd-index-content"><section class="tsd-index-section "><h3>Methods</h3><ul class="tsd-index-list"><li class="tsd-kind-method tsd-parent-kind-interface"><a href="CameraRecordingDelegate.html#acknowledgeStream" class="tsd-kind-icon">acknowledge<wbr/>Stream</a></li><li class="tsd-kind-method tsd-parent-kind-interface"><a href="CameraRecordingDelegate.html#closeRecordingStream" class="tsd-kind-icon">close<wbr/>Recording<wbr/>Stream</a></li><li class="tsd-kind-method tsd-parent-kind-interface"><a href="CameraRecordingDelegate.html#handleRecordingStreamRequest" class="tsd-kind-icon">handle<wbr/>Recording<wbr/>Stream<wbr/>Request</a></li><li class="tsd-kind-method tsd-parent-kind-interface"><a href="CameraRecordingDelegate.html#updateRecordingActive" class="tsd-kind-icon">update<wbr/>Recording<wbr/>Active</a></li><li class="tsd-kind-method tsd-parent-kind-interface"><a href="CameraRecordingDelegate.html#updateRecordingConfiguration" class="tsd-kind-icon">update<wbr/>Recording<wbr/>Configuration</a></li></ul></section></div></section></section><section class="tsd-panel-group tsd-member-group "><h2>Methods</h2><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-interface"><a id="acknowledgeStream" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagOptional">Optional</span> acknowledge<wbr/>Stream<a href="#acknowledgeStream" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-interface"><li class="tsd-signature tsd-kind-icon">acknowledge<wbr/>Stream<span class="tsd-signature-symbol">(</span>streamId<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">number</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/homebridge/HAP-NodeJS/blob/00d8a11/src/lib/controller/CameraController.ts#L273">lib/controller/CameraController.ts:273</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>This method is called once the HomeKit Controller acknowledges the <code>endOfStream</code>.
A <code>endOfStream</code> is sent by the accessory by setting <a href="RecordingPacket.html#isLast">RecordingPacket.isLast</a> to <code>true</code> in the last packet yielded
by the <a href="CameraRecordingDelegate.html#handleRecordingStreamRequest">handleRecordingStreamRequest</a> <code>AsyncGenerator</code>.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>streamId: <span class="tsd-signature-type">number</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>The streamId of the acknowledged stream.</p>
</div></div></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-interface"><a id="closeRecordingStream" class="tsd-anchor"></a><h3 class="tsd-anchor-link">close<wbr/>Recording<wbr/>Stream<a href="#closeRecordingStream" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-interface"><li class="tsd-signature tsd-kind-icon">close<wbr/>Recording<wbr/>Stream<span class="tsd-signature-symbol">(</span>streamId<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">number</span>, reason<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">undefined</span><span class="tsd-signature-symbol"> | </span><a href="../enums/HDSProtocolSpecificErrorReason.html" class="tsd-signature-type" data-tsd-kind="Enumeration">HDSProtocolSpecificErrorReason</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/homebridge/HAP-NodeJS/blob/00d8a11/src/lib/controller/CameraController.ts#L287">lib/controller/CameraController.ts:287</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>This method is called to notify the delegate that a recording stream started via <a href="CameraRecordingDelegate.html#handleRecordingStreamRequest">handleRecordingStreamRequest</a> was closed.</p>
</div><div><p>The method is also called if an ongoing recording stream is closed gracefully (using <a href="../enums/HDSProtocolSpecificErrorReason.html#NORMAL">HDSProtocolSpecificErrorReason.NORMAL</a>).
In either case, the delegate should stop supplying further fragments to the recording stream.
The <code>AsyncGenerator</code> function must return without yielding any further <a href="RecordingPacket.html">RecordingPacket</a>s.
HAP-NodeJS won&#39;t send out any fragments from this point onwards.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>streamId: <span class="tsd-signature-type">number</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>The streamId for which the close event was sent.</p>
</div></div></li><li><h5>reason: <span class="tsd-signature-type">undefined</span><span class="tsd-signature-symbol"> | </span><a href="../enums/HDSProtocolSpecificErrorReason.html" class="tsd-signature-type" data-tsd-kind="Enumeration">HDSProtocolSpecificErrorReason</a></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>The reason with which the stream was closed.
 NOTE: This method is also called in case of a closed connection. This is encoded by setting the <code>reason</code> to undefined.</p>
</div></div></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-interface"><a id="handleRecordingStreamRequest" class="tsd-anchor"></a><h3 class="tsd-anchor-link">handle<wbr/>Recording<wbr/>Stream<wbr/>Request<a href="#handleRecordingStreamRequest" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-interface"><li class="tsd-signature tsd-kind-icon">handle<wbr/>Recording<wbr/>Stream<wbr/>Request<span class="tsd-signature-symbol">(</span>streamId<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">number</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">AsyncGenerator</span><span class="tsd-signature-symbol">&lt;</span><a href="RecordingPacket.html" class="tsd-signature-type" data-tsd-kind="Interface">RecordingPacket</a><span class="tsd-signature-symbol">, </span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">, </span><span class="tsd-signature-type">unknown</span><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/homebridge/HAP-NodeJS/blob/00d8a11/src/lib/controller/CameraController.ts#L264">lib/controller/CameraController.ts:264</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>This method is called to stream the next recording event.
It is guaranteed that there is only ever one ongoing recording stream request at a time.</p>
</div><div><p>When this method is called return the currently ongoing (or next in case of a potentially queued)
recording via a <code>AsyncGenerator</code>. Every <code>yield</code> of the generator represents a complete recording <code>packet</code>.
The first packet MUST always be the <a href="../enums/PacketDataType.html#MEDIA_INITIALIZATION">PacketDataType.MEDIA_INITIALIZATION</a> packet.
Any following packet will transport the actual mp4 fragments in <a href="../enums/PacketDataType.html#MEDIA_FRAGMENT">PacketDataType.MEDIA_FRAGMENT</a> packets,
starting with the content of the prebuffer. Every <a href="../enums/PacketDataType.html#MEDIA_FRAGMENT">PacketDataType.MEDIA_FRAGMENT</a> starts with a key frame
and must not be longer than the specified duration set via the {@link CameraRecordingConfiguration.mediaContainerConfiguration.fragmentLength}
<strong>selected</strong> by the HomeKit Controller in <a href="CameraRecordingDelegate.html#updateRecordingConfiguration">updateRecordingConfiguration</a>.</p>
<p>NOTE: You MUST respect the value of <a href="../classes/Characteristic.html#RecordingAudioActive">Characteristic.RecordingAudioActive</a> characteristic of the <a href="../classes/Service.html#CameraOperatingMode">Service.CameraOperatingMode</a>
  service. When the characteristic is set to false you MUST NOT include audio in the mp4 fragments. You can access the characteristic via
  the {@link CameraController.recordingManagement.operatingModeService} property.</p>
<p>You might throw an error in this method if encountering a non-recoverable state.
You may throw a <a href="../classes/HDSProtocolError.html">HDSProtocolError</a> to manually define the <a href="../enums/HDSProtocolSpecificErrorReason.html">HDSProtocolSpecificErrorReason</a> for the <code>DATA_SEND</code> <code>CLOSE</code> event.</p>
<p>There are three ways an ongoing recording stream can be closed:</p>
<ul>
<li>Closed by the Accessory: There are no further fragments to transmit. The delegate MUST signal this by setting <a href="RecordingPacket.html#isLast">RecordingPacket.isLast</a>
to <code>true</code>. Once the HomeKit Controller receives this last fragment it will call <a href="CameraRecordingDelegate.html#acknowledgeStream">acknowledgeStream</a> to notify the accessory about
the successful transmission.</li>
<li>Closed by the HomeKit Controller (expectedly): After the event trigger has been reset, the accessory continues to stream fragments.
At some point the HomeKit Controller will decide to shut down the stream by calling <a href="CameraRecordingDelegate.html#closeRecordingStream">closeRecordingStream</a> with a reason
of <a href="../enums/HDSProtocolSpecificErrorReason.html#NORMAL">HDSProtocolSpecificErrorReason.NORMAL</a>.</li>
<li>Closed by the HomeKit Controller (unexpectedly): A HomeKit Controller might at any point decide to close a recording stream
if it encounters erroneous state. This is signaled by a call to <a href="CameraRecordingDelegate.html#closeRecordingStream">closeRecordingStream</a> with the respective reason.</li>
</ul>
<p>Once a close of stream is signaled, the <code>AsyncGenerator</code> function must return gracefully.</p>
<p>For more information about <code>AsyncGenerator</code>s you might have a look at:</p>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for-await...of">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for-await...of</a></li>
</ul>
<p>NOTE: HAP-NodeJS guarantees that this method is only called with a valid selected <a href="CameraRecordingConfiguration.html">CameraRecordingConfiguration</a>.</p>
<p>NOTE: Don&#39;t rely on the streamId for unique identification. Two <a href="../classes/DataStreamConnection.html">DataStreamConnection</a>s might share the same identifier space.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>streamId: <span class="tsd-signature-type">number</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>The streamId of the currently ongoing stream.</p>
</div></div></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">AsyncGenerator</span><span class="tsd-signature-symbol">&lt;</span><a href="RecordingPacket.html" class="tsd-signature-type" data-tsd-kind="Interface">RecordingPacket</a><span class="tsd-signature-symbol">, </span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">, </span><span class="tsd-signature-type">unknown</span><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-interface"><a id="updateRecordingActive" class="tsd-anchor"></a><h3 class="tsd-anchor-link">update<wbr/>Recording<wbr/>Active<a href="#updateRecordingActive" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-interface"><li class="tsd-signature tsd-kind-icon">update<wbr/>Recording<wbr/>Active<span class="tsd-signature-symbol">(</span>active<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">boolean</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/homebridge/HAP-NodeJS/blob/00d8a11/src/lib/controller/CameraController.ts#L203">lib/controller/CameraController.ts:203</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>A call to this method notifies the <code>CameraRecordingDelegate</code> about a change to the
<code>CameraRecordingManagement.Active</code> characteristic. This characteristic controls
if the camera should react to recording events.</p>
</div><div><p>If recording is disabled the camera can stop maintaining its prebuffer.
If recording is enabled the camera should start recording into its prebuffer.</p>
<p>A <code>CameraRecordingDelegate</code> should assume active to be <code>false</code> on startup.
HAP-NodeJS will persist the state of the <code>Active</code> characteristic across reboots
and will call <a href="CameraRecordingDelegate.html#updateRecordingActive">updateRecordingActive</a> accordingly on startup, if recording was previously enabled.</p>
<p>NOTE: HAP-NodeJS cannot guarantee that a <a href="CameraRecordingConfiguration.html">CameraRecordingConfiguration</a> is present
when recording is activated (e.g. the selected configuration might be erased due to changes
in the supplied <a href="../modules.html#CameraRecordingOptions">CameraRecordingOptions</a>, but the camera is still <code>active</code>; or we can&#39;t otherwise
influence the order which a HomeKit Controller might call those characteristics).
However, HAP-NodeJS guarantees that if there is a valid <a href="CameraRecordingConfiguration.html">CameraRecordingConfiguration</a>,
<a href="CameraRecordingDelegate.html#updateRecordingConfiguration">updateRecordingConfiguration</a> is called before <a href="CameraRecordingDelegate.html#updateRecordingActive">updateRecordingActive</a> (when enabling)
to avoid any unnecessary and potentially expensive reconfigurations.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>active: <span class="tsd-signature-type">boolean</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>Specifies if recording is active or not.</p>
</div></div></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-interface"><a id="updateRecordingConfiguration" class="tsd-anchor"></a><h3 class="tsd-anchor-link">update<wbr/>Recording<wbr/>Configuration<a href="#updateRecordingConfiguration" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-interface"><li class="tsd-signature tsd-kind-icon">update<wbr/>Recording<wbr/>Configuration<span class="tsd-signature-symbol">(</span>configuration<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">undefined</span><span class="tsd-signature-symbol"> | </span><a href="CameraRecordingConfiguration.html" class="tsd-signature-type" data-tsd-kind="Interface">CameraRecordingConfiguration</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/homebridge/HAP-NodeJS/blob/00d8a11/src/lib/controller/CameraController.ts#L222">lib/controller/CameraController.ts:222</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>A call to this method signals that the selected (by the HomeKit Controller)
recording configuration of the camera has changed.</p>
</div><div><p>On startup the delegate should assume <code>configuration = undefined</code>.
HAP-NodeJS will persist the state of both across reboots and will call
<a href="CameraRecordingDelegate.html#updateRecordingConfiguration">updateRecordingConfiguration</a> on startup if there is a <strong>selected configuration</strong> present.</p>
<p>NOTE: An update to the recording configuration might happen while there is still a running
recording stream. The camera MUST continue to use the previous configuration for the
currently running stream and only apply the updated configuration to the next stream.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>configuration: <span class="tsd-signature-type">undefined</span><span class="tsd-signature-symbol"> | </span><a href="CameraRecordingConfiguration.html" class="tsd-signature-type" data-tsd-kind="Interface">CameraRecordingConfiguration</a></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>The <a href="CameraRecordingConfiguration.html">CameraRecordingConfiguration</a>. Reconfigure your recording pipeline accordingly.
 The parameter might be <code>undefined</code> when the selected configuration became invalid. This typically ony happens
 e.g. due to a factory reset (when all pairings are removed). Disable the recording pipeline in such a case
 even if recording is still enabled for the camera.</p>
</div></div></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4></li></ul></section></section></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class=""><a href="../modules.html">Exports</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="current tsd-kind-interface"><a href="CameraRecordingDelegate.html" class="tsd-kind-icon">Camera<wbr/>Recording<wbr/>Delegate</a><ul><li class="tsd-kind-method tsd-parent-kind-interface"><a href="CameraRecordingDelegate.html#acknowledgeStream" class="tsd-kind-icon">acknowledge<wbr/>Stream</a></li><li class="tsd-kind-method tsd-parent-kind-interface"><a href="CameraRecordingDelegate.html#closeRecordingStream" class="tsd-kind-icon">close<wbr/>Recording<wbr/>Stream</a></li><li class="tsd-kind-method tsd-parent-kind-interface"><a href="CameraRecordingDelegate.html#handleRecordingStreamRequest" class="tsd-kind-icon">handle<wbr/>Recording<wbr/>Stream<wbr/>Request</a></li><li class="tsd-kind-method tsd-parent-kind-interface"><a href="CameraRecordingDelegate.html#updateRecordingActive" class="tsd-kind-icon">update<wbr/>Recording<wbr/>Active</a></li><li class="tsd-kind-method tsd-parent-kind-interface"><a href="CameraRecordingDelegate.html#updateRecordingConfiguration" class="tsd-kind-icon">update<wbr/>Recording<wbr/>Configuration</a></li></ul></li></ul></nav></div></div></div><footer class=""><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-constructor tsd-parent-kind-interface"><span class="tsd-kind-icon">Constructor</span></li><li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li><li class="tsd-kind-method tsd-parent-kind-interface"><span class="tsd-kind-icon">Method</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li><li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li><li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-constructor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited constructor</span></li><li class="tsd-kind-property tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited property</span></li><li class="tsd-kind-method tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited method</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static property</span></li><li class="tsd-kind-method tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static method</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="overlay"></div><script src="../assets/main.js"></script></body></html>